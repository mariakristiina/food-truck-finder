<h1>Berlin Food Trucks</h1>
<h1>Find a Foodtruck!</h1>




<div id='map' style='width: 800px; height: 600px;'></div>

<script>
  mapboxgl.accessToken = 'pk.eyJ1IjoibWFwYm94cHJvamVjdCIsImEiOiJjazJ6eXNqcWIwajd4M21zMDlxamdxYTZpIn0.2yA5cyZqIRxwYPwxku-tUQ';
  var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v9',
    center: [13.40, 52.52],
    zoom: 12

  });

  map.addControl(new mapboxgl.GeolocateControl({
    positionOptions: {
      enableHighAccuracy: true
    },
    trackUserLocation: true
  }));



  const getMarkers = () => {

    axios.get('/api/findtrucks').then(response => {

      const coordinates = response.data.map(x => {
        return x.locations;
      })

      console.log(coordinates)

      coordinates.forEach(x => {
        return new mapboxgl.Marker().setLngLat(x).addTo(map)
      })

    }).catch(err => {
      console.log(err)
    })
  }
  getMarkers();



</script>

{{!-- response.forEach(truck => {
        const coordinates = truck.locations;
        new mapboxgl.Marker().setLngLat(coordinates).addTo(map)
      }) --}}